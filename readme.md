## Server Side Rendering (SSR)

the idea is to render the html in the server first (run React in our server before sending the response to the browser and returning the rendered html to the browser).

### A shallow Algorithm for doing SSR

- render your component to an html and respond with it as a String
- build your client bundle (your React application js files)
- make your initial html you responded with to send a request again and download your **_client bundle.js_**
  now you have the React application in the browser and you repsonded with the first response
- hydrate your first html you re sponded with (add the javascript code required for it to work)
  hydration means attaching your event listeners and all js stuff to bring life to them (to make them dynamic)

### Redux Challenges

- Redux needs different configuration on browser vs server
- Need some way to detect when all initial data load action creators are completed on server
- Aspects of authentication needs to be handled on server. (Normally this is only on browser)
- Need state rehydration on the browser

## Routing

- static router vs browser router

### Problems will we face.

- booting up the React Application in the server
- building the React bundle
- Routing
- Structure MisMatch between the HTML returned from server and the HTML generated by react in the browser
- loading data inside redux store and wait for action creators untill they finish fetching data and then rerender the app to get the right html to respond with

### A shallow Algorithm for figuring out how to load data in the store

- figure out which component to render in the screen via using `react-router-config`
- figure out which data you should load with that component via attachign a `loadData` function with each component
- call these `loadData` functions
- dispatch action creators manually
- render the application and respond with the result

### Redhydrating Redux State

Just initialize the client store the the state of the finished store of the server.

But , How?

before responding with the HMTL put a script inside it and initialize a property in the **global** `window` **object** with the redux state loaded from the server.
in the client retreive that property from the `window` object and put it as initial state for the redux store used in the client.

## XSS Attack can possible

by doing the previous approach of dumping the server loaded state inside the HTML in a script, xss attacks is possible

### A Solution

`serialize-javascript`
